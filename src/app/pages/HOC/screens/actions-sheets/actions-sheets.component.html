<div class="w-full p-4 space-y-4 sm:p-6 sm:ps-4 sm:space-y-6">
  <form
    [formGroup]="sheetForm"
    (ngSubmit)="actionsSheet()"
    class="w-full py-8 bg-white px-14 rounded-xl"
  >
    <div class="flex flex-col gap-y-4">
      <h2 class="w-full pb-6 text-3xl font-bold border-b-2">
        @if (id === 0) { Add Sheet }@else { Edit Sheet }
      </h2>

      <div class="flex items-center justify-between w-full ps-4">
        <div class="flex flex-col basis-1/2">
          <label class="text-lg">Name</label>
          <div class="relative">
            <input
              type="text"
              formControlName="name"
              class="relative block w-[450px] my-2 p-3 text-black bg-[#fff] border-2 rounded-lg appearance-none focus:outline-none"
              placeholder="Name"
            />
          </div>
        </div>
        <div class="flex flex-col basis-1/2">
          <label class="text-lg">Sheet Link</label>
          <div class="relative">
            <input
              type="text"
              formControlName="sheetLink"
              class="relative block w-[450px] my-2 p-3 text-black bg-[#fff] border-2 rounded-lg appearance-none focus:outline-none"
              placeholder="Sheet Link"
            />
          </div>
        </div>
      </div>
    </div>
    <!-- Dates -->
    <div class="flex items-center justify-between w-full mt-2 ps-4">
      <div class="flex flex-col basis-1/2">
        <label for="startDate" class="text-lg">Start Date</label>
        <input
          type="date"
          id="startDate"
          formControlName="startDate"
          placeholder="Select Start Date"
          class="block w-[450px] my-2 p-3 text-black bg-[#fff] border-2 rounded-lg focus:outline-none"
        />
      </div>

      <div class="flex flex-col basis-1/2">
        <label for="endDate" class="text-lg">End Date</label>
        <input
          type="date"
          id="endDate"
          formControlName="endDate"
          placeholder="Select End Date"
          class="block w-[450px] my-2 p-3 text-black bg-[#fff] border-2 rounded-lg focus:outline-none"
        />
      </div>
    </div>

    <div class="flex items-center justify-between w-full mt-2 ps-4">
      <div class="flex flex-col basis-1/2">
        <label class="text-lg">Community</label>
        <div class="relative w-[450px]">
          <ng-select
            #community
            [closeOnSelect]="true"
            bindLabel="name"
            bindValue="id"
            formControlName="community"
            placeholder="Community"
            (click)="toggleDropdown()"
            class="relative block text-lg w-full my-2 text-black bg-[#fff] border-2 rounded-lg appearance-none focus:outline-none"
          >
            <ng-option [value]="1"> Sohag </ng-option>
            <ng-option [value]="2"> Assuit </ng-option>
          </ng-select>
          <button (click)="toggleDropdown()" type="button">
            <svg
              [ngClass]="dropdownOpen ? 'rotate-180' : ''"
              class="absolute transition-transform top-4 size-8 right-4"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M19.9201 8.9502L13.4001 15.4702C12.6301 16.2402 11.3701 16.2402 10.6001 15.4702L4.08008 8.9502"
                stroke="#A8A8A8"
                stroke-width="1.5"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
      </div>
      <div class="flex flex-col basis-1/2">
        <label class="text-lg">Codeforce Id</label>
        <div class="relative">
          <input
            type="text"
            formControlName="sheetCodefroceId"
            class="relative block w-[450px] my-2 p-3 text-black bg-[#fff] border-2 rounded-lg appearance-none focus:outline-none"
            placeholder="Codeforce Id"
          />
        </div>
      </div>
    </div>

    <div class="flex items-center justify-between w-full mt-2 ps-4">
      <div class="flex flex-col basis-1/2">
        <label class="text-lg">Status </label>
        <div class="relative w-[450px]">
          <ng-select
            #status
            [closeOnSelect]="true"
            bindLabel="name"
            bindValue="id"
            formControlName="status"
            placeholder="Status "
            (click)="toggleDropdownS()"
            class="relative block text-lg w-full my-2 text-black bg-[#fff] border-2 rounded-lg appearance-none focus:outline-none"
          >
            <ng-option [value]="0"> Incoming </ng-option>
            <ng-option [value]="1"> Inprogress </ng-option>
            <ng-option [value]="2"> Completed </ng-option>
          </ng-select>
          <button (click)="toggleDropdownS()" type="button">
            <svg
              [ngClass]="dropdownOpenS ? 'rotate-180' : ''"
              class="absolute transition-transform top-4 size-8 right-4"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M19.9201 8.9502L13.4001 15.4702C12.6301 16.2402 11.3701 16.2402 10.6001 15.4702L4.08008 8.9502"
                stroke="#A8A8A8"
                stroke-width="1.5"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
      </div>
      <div class="flex flex-col basis-1/2">
        <label class="text-lg">Minimum Passing Precent</label>
        <div class="relative">
          <input
            type="text"
            formControlName="minimumPassingPrecent"
            class="relative block w-[450px] my-2 p-3 text-black bg-[#fff] border-2 rounded-lg appearance-none focus:outline-none"
            placeholder="Minimum Passing Precent"
          />
        </div>
      </div>
    </div>

    <div class="flex items-center justify-start w-full mt-2 ps-4">
      <div class="flex flex-col w-[450px]">
        <label class="text-lg">Problems Count</label>
        <div class="relative">
          <button
            (click)="decrease()"
            type="button"
            class="absolute inset-y-0 z-20 left-4"
          >
            <svg
              width="40"
              height="40"
              viewBox="0 0 40 40"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M29.9987 21.6634H9.9987C9.55667 21.6634 9.13275 21.4878 8.82019 21.1753C8.50763 20.8627 8.33203 20.4388 8.33203 19.9967C8.33203 19.5547 8.50763 19.1308 8.82019 18.8182C9.13275 18.5057 9.55667 18.3301 9.9987 18.3301H29.9987C30.4407 18.3301 30.8647 18.5057 31.1772 18.8182C31.4898 19.1308 31.6654 19.5547 31.6654 19.9967C31.6654 20.4388 31.4898 20.8627 31.1772 21.1753C30.8647 21.4878 30.4407 21.6634 29.9987 21.6634Z"
                fill="#D9D9D9"
              />
            </svg>
          </button>
          <input
            type="text"
            formControlName="problemCount"
            readonly
            class="relative block text-center text-xl w-full my-2 p-3 text-[#00000040] caret-transparent bg-[#fff] border-2 rounded-lg appearance-none focus:outline-none"
          />
          <button
            (click)="increase()"
            type="button"
            class="absolute inset-y-0 right-4"
          >
            <svg
              width="40"
              height="40"
              viewBox="0 0 40 40"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M29.9987 21.6634H21.6654V29.9967C21.6654 30.4388 21.4898 30.8627 21.1772 31.1753C20.8646 31.4878 20.4407 31.6634 19.9987 31.6634C19.5567 31.6634 19.1327 31.4878 18.8202 31.1753C18.5076 30.8627 18.332 30.4388 18.332 29.9967V21.6634H9.9987C9.55667 21.6634 9.13275 21.4878 8.82019 21.1753C8.50763 20.8627 8.33203 20.4388 8.33203 19.9967C8.33203 19.5547 8.50763 19.1308 8.82019 18.8182C9.13275 18.5057 9.55667 18.3301 9.9987 18.3301H18.332V9.99674C18.332 9.55472 18.5076 9.13079 18.8202 8.81823C19.1327 8.50567 19.5567 8.33008 19.9987 8.33008C20.4407 8.33008 20.8646 8.50567 21.1772 8.81823C21.4898 9.13079 21.6654 9.55472 21.6654 9.99674V18.3301H29.9987C30.4407 18.3301 30.8647 18.5057 31.1772 18.8182C31.4898 19.1308 31.6654 19.5547 31.6654 19.9967C31.6654 20.4388 31.4898 20.8627 31.1772 21.1753C30.8647 21.4878 30.4407 21.6634 29.9987 21.6634Z"
                fill="#D9D9D9"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <div class="flex items-center justify-end w-11/12 mt-20 gap-x-8">
      <button
        [routerLink]="'/head_of_camp/sheets'"
        type="button"
        class="px-6 py-1.5 text-xl text-[#6B7088] border rounded-lg w-fit bg-white"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="px-6 py-1.5 text-xl bg-white border rounded-lg text-activeLink w-fit"
      >
        @if (isLoading) {
        <div class="flex items-center justify-center w-full bg-opacity-60">
          <div class="flex items-center justify-center">
            <div
              class="w-8 h-8 border-4 border-blue-600 border-dashed rounded-full animate-spin"
            ></div>
          </div>
        </div>
        }@else { Save }
      </button>
    </div>
  </form>
  <div class="fixed space-y-2 bottom-4 z-[1300] right-8">
    @for (error of errorMessages; track i; let i = $index) {
    <div
      (click)="removeError(i)"
      class="flex items-center justify-between cursor-pointer max-w-lg px-6 py-4 mx-2 my-4 text-lg bg-[#fae1e3] border-l-[10px] border-[#DC3545] rounded-md"
    >
      <div class="flex items-center pe-8">
        <svg
          class="w-8 h-8 mr-3"
          viewBox="0 0 40 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.1493 6.43367L3.03264 30.0003C2.74158 30.5044 2.58758 31.0758 2.58595 31.6579C2.58432 32.2399 2.73512 32.8122 3.02335 33.3179C3.31157 33.8235 3.72718 34.2449 4.22882 34.5401C4.73045 34.8353 5.30063 34.9939 5.88264 35.0003H34.116C34.698 34.9939 35.2682 34.8353 35.7698 34.5401C36.2714 34.2449 36.687 33.8235 36.9753 33.3179C37.2635 32.8122 37.4143 32.2399 37.4127 31.6579C37.411 31.0758 37.257 30.5044 36.966 30.0003L22.8493 6.43367C22.5522 5.94385 22.1338 5.53887 21.6346 5.25781C21.1354 4.97675 20.5722 4.8291 19.9993 4.8291C19.4264 4.8291 18.8632 4.97675 18.364 5.25781C17.8648 5.53887 17.4464 5.94385 17.1493 6.43367V6.43367Z"
            stroke="#DC3545"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M20 15V21.6667"
            stroke="#DC3545"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M20 26.667V27.5003"
            stroke="#DC3545"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>

        <span class="text-red-800"> {{ error }} </span>
      </div>

      <button
        (click)="removeError(i)"
        type="button"
        class="ml-4 text-red-800 hover:text-red-500 focus:outline-none"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    }
  </div>
  @if (errorMessage || successMessage) {
  <div class="fixed space-y-2 bottom-4 z-[1300] right-8">
    <div
      (click)="removeErrorM()"
      [ngClass]="
        errorMessage
          ? 'border-[#DC3545] bg-[#fae1e3]'
          : 'bg-[#dff2e3] border-[#28A745]'
      "
      class="flex items-center justify-between cursor-pointer max-w-lg px-6 py-4 mx-2 my-4 text-lg border-l-[10px] rounded-md"
    >
      <div class="flex items-center pe-8">
        @if (errorMessage) {
        <svg
          class="w-8 h-8 mr-3"
          viewBox="0 0 40 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.1493 6.43367L3.03264 30.0003C2.74158 30.5044 2.58758 31.0758 2.58595 31.6579C2.58432 32.2399 2.73512 32.8122 3.02335 33.3179C3.31157 33.8235 3.72718 34.2449 4.22882 34.5401C4.73045 34.8353 5.30063 34.9939 5.88264 35.0003H34.116C34.698 34.9939 35.2682 34.8353 35.7698 34.5401C36.2714 34.2449 36.687 33.8235 36.9753 33.3179C37.2635 32.8122 37.4143 32.2399 37.4127 31.6579C37.411 31.0758 37.257 30.5044 36.966 30.0003L22.8493 6.43367C22.5522 5.94385 22.1338 5.53887 21.6346 5.25781C21.1354 4.97675 20.5722 4.8291 19.9993 4.8291C19.4264 4.8291 18.8632 4.97675 18.364 5.25781C17.8648 5.53887 17.4464 5.94385 17.1493 6.43367V6.43367Z"
            stroke="#DC3545"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M20 15V21.6667"
            stroke="#DC3545"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M20 26.667V27.5003"
            stroke="#DC3545"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        }@else {
        <svg
          class="w-8 h-8 mr-3"
          viewBox="0 0 40 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M36.6693 18.4671V20.0004C36.6672 23.5945 35.5034 27.0916 33.3515 29.9701C31.1996 32.8487 28.1747 34.9546 24.7282 35.9736C21.2817 36.9926 17.598 36.8703 14.2267 35.6247C10.8554 34.3792 7.97703 32.0773 6.02087 29.0622C4.06471 26.0472 3.13559 22.4805 3.37207 18.8943C3.60854 15.308 4.99795 11.8943 7.33307 9.16221C9.66819 6.43012 12.8239 4.52606 16.3296 3.734C19.8353 2.94194 23.5031 3.30432 26.7859 4.76709"
            stroke="#28A745"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M36.6667 6.66699L20 23.3503L15 18.3503"
            stroke="#28A745"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>

        }

        <span [ngClass]="errorMessage ? 'text-red-800' : 'text-green-800'">
          {{ errorMessage || successMessage }}
        </span>
      </div>

      <button
        (click)="removeErrorM()"
        type="button"
        [ngClass]="
          errorMessage
            ? ' text-red-800 hover:text-red-500'
            : 'text-green-800 hover:text-green-500'
        "
        class="ml-4 focus:outline-none"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>
  </div>
  }
</div>
